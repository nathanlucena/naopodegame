<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Não Pode - Jogo</title>
    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
</head>
<body>
    <div id="root"></div>
    
    <script type="text/babel">
        const { useState, useEffect } = React;

        const ArrowLeft = () => (
            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2">
                <line x1="19" y1="12" x2="5" y2="12"></line>
                <polyline points="12 19 5 12 12 5"></polyline>
            </svg>
        );

        const RefreshCw = () => (
            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2">
                <polyline points="23 4 23 10 17 10"></polyline>
                <polyline points="1 20 1 14 7 14"></polyline>
                <path d="M3.51 9a9 9 0 0 1 14.85-3.36L23 10M1 14l4.64 4.36A9 9 0 0 0 20.49 15"></path>
            </svg>
        );

        const NaoPodeGame = () => {
            const [gameData, setGameData] = useState(null);
            const [currentScreen, setCurrentScreen] = useState('initial');
            const [selectedDifficulty, setSelectedDifficulty] = useState('todas');
            const [selectedCategory, setSelectedCategory] = useState('todas');
            const [currentWord, setCurrentWord] = useState(null);
            const [loading, setLoading] = useState(true);

            const exampleData = {
                "configuracoes": {
                    "categorias": ["objetos", "comidas/bebidas", "lugares", "animais", "profissões"],
                    "dificuldades": ["fácil", "médio", "difícil"],
                    "distribuicao_dificuldades": {
                        "fácil": 120,
                        "médio": 100,
                        "difícil": 80
                    }
                },
                "palavras": [
                    {
                        "word": "PRAIA",
                        "cannot": ["areia", "mar", "sol", "toalha", "onda"],
                        "dificult": "fácil",
                        "category": "lugares"
                    },
                    {
                        "word": "PIZZA",
                        "cannot": ["queijo", "massa", "forno", "italiana", "fatia"],
                        "dificult": "fácil",
                        "category": "comidas/bebidas"
                    },
                    {
                        "word": "CACHORRO",
                        "cannot": ["late", "pet", "animal", "ração", "osso"],
                        "dificult": "fácil",
                        "category": "animais"
                    },
                    {
                        "word": "COMPUTADOR",
                        "cannot": ["teclado", "mouse", "tela", "internet", "programa"],
                        "dificult": "médio",
                        "category": "objetos"
                    },
                    {
                        "word": "MÉDICO",
                        "cannot": ["hospital", "doença", "remédio", "saúde", "paciente"],
                        "dificult": "médio",
                        "category": "profissões"
                    },
                    {
                        "word": "REFRIGERANTE",
                        "cannot": ["coca", "gás", "gelado", "doce", "lata"],
                        "dificult": "difícil",
                        "category": "comidas/bebidas"
                    },
                    {
                        "word": "AMAZÔNIA",
                        "cannot": ["floresta", "Brasil", "árvores", "rio", "verde"],
                        "dificult": "difícil",
                        "category": "lugares"
                    },
                    {
                        "word": "CAFÉ",
                        "cannot": ["manhã", "preto", "xícara", "cafeína", "quente"],
                        "dificult": "fácil",
                        "category": "comidas/bebidas"
                    },
                    {
                        "word": "ELEFANTE",
                        "cannot": ["tromba", "grande", "cinza", "África", "mamífero"],
                        "dificult": "médio",
                        "category": "animais"
                    },
                    {
                        "word": "PROFESSOR",
                        "cannot": ["ensinar", "escola", "aluno", "aula", "quadro"],
                        "dificult": "fácil",
                        "category": "profissões"
                    }
                ]
            };

            useEffect(() => {
                fetch('./words.json')
                    .then(response => {
                        if (!response.ok) throw new Error('Arquivo não encontrado');
                        return response.json();
                    })
                    .then(data => {
                        setGameData(data);
                        setLoading(false);
                    })
                    .catch(() => {
                        console.log('Usando dados de exemplo');
                        setGameData(exampleData);
                        setLoading(false);
                    });
            }, []);

            const getRandomWord = () => {
                if (!gameData) return null;

                let filteredWords = gameData.palavras;

                if (selectedDifficulty !== 'todas') {
                    filteredWords = filteredWords.filter(w => w.dificult === selectedDifficulty);
                }

                if (selectedCategory !== 'todas') {
                    filteredWords = filteredWords.filter(w => w.category === selectedCategory);
                }

                if (filteredWords.length === 0) {
                    alert('Nenhuma palavra encontrada com esses filtros!');
                    return null;
                }

                const randomIndex = Math.floor(Math.random() * filteredWords.length);
                return filteredWords[randomIndex];
            };

            const handleStart = () => {
                const word = getRandomWord();
                if (word) {
                    setCurrentWord(word);
                    setCurrentScreen('game');
                }
            };

            const handleGenerateNew = () => {
                const word = getRandomWord();
                if (word) {
                    setCurrentWord(word);
                }
            };

            const handleBackToHome = () => {
                setCurrentScreen('initial');
                setCurrentWord(null);
            };

            if (loading) {
                return (
                    <div className="min-h-screen bg-gradient-to-br from-purple-600 to-blue-600 flex items-center justify-center">
                        <div className="text-white text-2xl">Carregando...</div>
                    </div>
                );
            }

            return (
                <div className="min-h-screen bg-gradient-to-br from-purple-600 to-blue-600 p-4">
                    <header className="text-center py-6">
                        <h1 className="text-5xl font-bold text-white drop-shadow-lg">NÃO PODE</h1>
                    </header>

                    {currentScreen === 'initial' && (
                        <div className="max-w-md mx-auto mt-8">
                            <div className="bg-white rounded-3xl shadow-2xl p-8 space-y-6">
                                <div>
                                    <label className="block text-gray-700 font-semibold mb-2">
                                        Dificuldade
                                    </label>
                                    <select
                                        value={selectedDifficulty}
                                        onChange={(e) => setSelectedDifficulty(e.target.value)}
                                        className="w-full p-3 border-2 border-purple-300 rounded-xl focus:outline-none focus:border-purple-500 text-lg"
                                    >
                                        <option value="todas">Todas</option>
                                        {gameData.configuracoes.dificuldades.map(dif => (
                                            <option key={dif} value={dif}>{dif.charAt(0).toUpperCase() + dif.slice(1)}</option>
                                        ))}
                                    </select>
                                </div>

                                <div>
                                    <label className="block text-gray-700 font-semibold mb-2">
                                        Categoria
                                    </label>
                                    <select
                                        value={selectedCategory}
                                        onChange={(e) => setSelectedCategory(e.target.value)}
                                        className="w-full p-3 border-2 border-purple-300 rounded-xl focus:outline-none focus:border-purple-500 text-lg"
                                    >
                                        <option value="todas">Todas</option>
                                        {gameData.configuracoes.categorias.map(cat => (
                                            <option key={cat} value={cat}>
                                                {cat.charAt(0).toUpperCase() + cat.slice(1)}
                                            </option>
                                        ))}
                                    </select>
                                </div>

                                <button
                                    onClick={handleStart}
                                    className="w-full bg-gradient-to-r from-purple-500 to-blue-500 text-white text-2xl font-bold py-4 rounded-xl shadow-lg hover:from-purple-600 hover:to-blue-600 transform hover:scale-105 transition-all duration-200"
                                >
                                    INICIAR
                                </button>
                                <span>{gameData.configuracoes.versao}</span>
                            </div>
                        </div>
                    )}

                    {currentScreen === 'game' && currentWord && (
                        <div className="max-w-md mx-auto">
                            <button
                                onClick={handleBackToHome}
                                className="mb-4 bg-white/20 text-white p-2 rounded-full hover:bg-white/30 transition-all"
                            >
                                <ArrowLeft />
                            </button>

                            <div className="bg-white rounded-3xl shadow-2xl p-8 space-y-6">
                                <div className="text-center bg-gradient-to-r from-purple-500 to-blue-500 text-white py-8 rounded-2xl">
                                    <p className="text-sm uppercase tracking-wide mb-2 opacity-90">Explique esta palavra</p>
                                    <h2 className="text-5xl font-bold">{currentWord.word}</h2>
                                </div>

                                <div>
                                    <p className="text-center text-red-600 font-bold text-xl mb-4">
                                        ⛔ NÃO PODE FALAR:
                                    </p>
                                    <div className="grid grid-cols-2 gap-3">
                                        {currentWord.cannot.map((word, index) => (
                                            <div
                                                key={index}
                                                className="bg-red-100 border-2 border-red-300 text-red-700 font-semibold text-center py-3 px-4 rounded-xl"
                                            >
                                                {word}
                                            </div>
                                        ))}
                                    </div>
                                </div>

                                <div className="flex justify-center gap-4 text-sm text-gray-600">
                                    <span className="bg-gray-100 px-3 py-1 rounded-full">
                                        {currentWord.dificult}
                                    </span>
                                    <span className="bg-gray-100 px-3 py-1 rounded-full">
                                        {currentWord.category}
                                    </span>
                                </div>

                                <button
                                    onClick={handleGenerateNew}
                                    className="w-full bg-gradient-to-r from-green-500 to-teal-500 text-white text-xl font-bold py-4 rounded-xl shadow-lg hover:from-green-600 hover:to-teal-600 transform hover:scale-105 transition-all duration-200 flex items-center justify-center gap-2"
                                >
                                    <RefreshCw />
                                    GERAR OUTRA PALAVRA
                                </button>
                            </div>
                        </div>
                    )}
                </div>
            );
        };

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<NaoPodeGame />);
    </script>
</body>

</html>
